{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport api from \"../services/api\";\nexport function Auth(url, options) {\n  _s();\n\n  const [user, setUser] = useState(null);\n  const [check, setCheck] = useState(true);\n  const [err, setErr] = useState(true);\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await api.get('/api/Auth/perfil');\n\n        if (res.data) {\n          setUser(res.data);\n        }\n\n        setErr(false);\n      } catch (err) {\n        setCheck(false);\n      }\n    })();\n  }, []);\n  return {\n    user,\n    err,\n    check\n  };\n}\n\n_s(Auth, \"Lb+N/mA7KsHtH9rnPlqOpw7ai6E=\");\n\n_c = Auth;\nexport const logoutUser = async () => {\n  await api.post('/api/logout');\n  window.location.href = '/';\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["useEffect","useState","api","Auth","url","options","user","setUser","check","setCheck","err","setErr","res","get","data","logoutUser","post","window","location","href"],"sources":["C:/Users/ferre/OneDrive/√Årea de Trabalho/CLB02-2020---Portal-Geoeste/client/src/hooks/useAuth.ts"],"sourcesContent":["import { AxiosRequestConfig } from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport  api  from \"../services/api\";\r\n\r\nexport function Auth<User>(url:string, options?:AxiosRequestConfig){\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [check, setCheck] = useState(true);\r\n    const [err, setErr] = useState(true);\r\n\r\n    useEffect(()=>{\r\n        (async () =>{\r\n            try{\r\n                const res = await api.get('/api/Auth/perfil');\r\n                if(res.data){\r\n                    setUser(res.data);\r\n                }\r\n                setErr(false);\r\n\r\n            }catch(err){\r\n                setCheck(false);\r\n            }\r\n\r\n        })();\r\n    },[]);\r\n    return { user, err, check }\r\n}\r\n\r\nexport const logoutUser = async () =>{\r\n    await api.post('/api/logout');\r\n    window.location.href='/'\r\n}"],"mappings":";;AACA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAQC,GAAR,MAAkB,iBAAlB;AAEA,OAAO,SAASC,IAAT,CAAoBC,GAApB,EAAgCC,OAAhC,EAA4D;EAAA;;EAC/D,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAc,IAAd,CAAhC;EACA,MAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACS,GAAD,EAAMC,MAAN,IAAgBV,QAAQ,CAAC,IAAD,CAA9B;EAEAD,SAAS,CAAC,MAAI;IACV,CAAC,YAAW;MACR,IAAG;QACC,MAAMY,GAAG,GAAG,MAAMV,GAAG,CAACW,GAAJ,CAAQ,kBAAR,CAAlB;;QACA,IAAGD,GAAG,CAACE,IAAP,EAAY;UACRP,OAAO,CAACK,GAAG,CAACE,IAAL,CAAP;QACH;;QACDH,MAAM,CAAC,KAAD,CAAN;MAEH,CAPD,CAOC,OAAMD,GAAN,EAAU;QACPD,QAAQ,CAAC,KAAD,CAAR;MACH;IAEJ,CAZD;EAaH,CAdQ,EAcP,EAdO,CAAT;EAeA,OAAO;IAAEH,IAAF;IAAQI,GAAR;IAAaF;EAAb,CAAP;AACH;;GArBeL,I;;KAAAA,I;AAuBhB,OAAO,MAAMY,UAAU,GAAG,YAAW;EACjC,MAAMb,GAAG,CAACc,IAAJ,CAAS,aAAT,CAAN;EACAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,GAArB;AACH,CAHM"},"metadata":{},"sourceType":"module"}